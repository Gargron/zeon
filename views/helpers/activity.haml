%ul.activity
  - if session?
    - @activity.each do |activity|
      - if activity.type == :post || activity.type == :like
        %li.item.item_freetext
          %div.item_meta
            %a{ :href => "/user/" + activity.user.name }
              %img.avatar{ :src => activity.user.avatar(48), :width => "48", :height => "48" }
              %span.name= activity.user.name
            - if activity.type == :post
              %span.verb posted
              %a.object{ :href => "/thread/" + activity.id.to_s } a thread
            - if activity.type == :like
              %span.verb liked
              %a.object{ :href => "/thread/" + activity.parent.id.to_s }
                = activity.parent.user.name + "'s"
                thread
            %span.time= ago(activity.created_at)
          %div.item_content.format
            %h2
              %a{ :href => "/thread/" + activity.id.to_s }= activity.title
            :markdown
              #{activity.content}
          %div.item_utils
            %ul
              %li
                %a.like.boxed{ :href => "#" } Appreciate
              %li
                0 readers
              %li
                Tagged:
                - activity.tags.each do |tag|
                  %a.boxed{ :href => "/tag/" + tag.name }= tag.name
      - if activity.type == :reply || activity.type == :comment
        %li.item.item_indirect
          %div.item_meta
            %a{ :href => "/user/" + activity.user.name }
              %img.avatar{ :src => activity.user.avatar(48), :width => "48", :height => "48" }
              %span.name= activity.user.name
            %span.verb replied to
            %a.object{ :href => "/thread/" + activity.parent.id.to_s }
              = activity.parent.user.name + "'s"
              thread
            %span.time= ago(activity.created_at)
          %div.item_content
            %blockquote.item_reply.format
              :markdown
                #{activity.content}
          %div.item_utils
            %ul
              %li
                %a.boxed{ :href => "/thread/" + activity.parent.id.to_s } View in context
      - if activity.type == :image
        %li.item.item_image
          %div.item_meta
            %a{ :href => "/user/" + activity.user.name }
              %img.avatar{ :src => activity.user.avatar(48), :width => "48", :height => "48" }
              %span.name= activity.user.name
            %span.verb uploaded
            %a.object{ :href => "" } an image
            %span.time= ago(activity.created_at)
          %div.item_content
            %a.item_image{ :href => "#" }
              %img{ :src => "http://placehold.it/220x240", :width => "220", :height => "240" }
            %div.item_image_info
              %dl
                %dt Size:
                %dd 1.6 MB
              %dl
                %dt Dimensions:
                %dd 1456x757
              %dl
                %dt Source:
                %dd
                  %a{ :href => "#" } http://pixiv.net/&#0133;?id=12345
            %blockquote.item_image_comment.format
              :markdown
                #{activity.content}
          %div.item_utils
            %ul
              %li
                %a.like.boxed{ :href => "#" } Appreciate
              %li
                0 viewers
              %li
                Tagged:
                - activity.tags.each do |tag|
                  %a.boxed{ :href => "" }= tag.name